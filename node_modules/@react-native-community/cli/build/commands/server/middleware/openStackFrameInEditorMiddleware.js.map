{"version":3,"sources":["../../../../src/commands/server/middleware/openStackFrameInEditorMiddleware.ts"],"names":["getOpenStackFrameInEditorMiddleware","watchFolders","req","res","next","url","frame","JSON","parse","rawBody","file","lineNumber","end"],"mappings":";;;;;;;AAOA;;;;AAPA;;;;;;AASe,SAASA,mCAAT,CAA6C;AAC1DC,EAAAA;AAD0D,CAA7C,EAIZ;AACD,SAAO,CACLC,GADK,EAELC,GAFK,EAGLC,IAHK,KAIF;AACH,QAAIF,GAAG,CAACG,GAAJ,KAAY,mBAAhB,EAAqC;AACnC,YAAMC,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWN,GAAG,CAACO,OAAf,CAAd;AACA,iCAAaH,KAAK,CAACI,IAAnB,EAAyBJ,KAAK,CAACK,UAA/B,EAA2CV,YAA3C;AACAE,MAAAA,GAAG,CAACS,GAAJ,CAAQ,IAAR;AACD,KAJD,MAIO;AACLR,MAAAA,IAAI;AACL;AACF,GAZD;AAaD","sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport http from 'http';\nimport launchEditor from '../launchEditor';\n\nexport default function getOpenStackFrameInEditorMiddleware({\n  watchFolders,\n}: {\n  watchFolders: Array<string>;\n}) {\n  return (\n    req: http.IncomingMessage & {rawBody: string},\n    res: http.ServerResponse,\n    next: (err?: any) => void,\n  ) => {\n    if (req.url === '/open-stack-frame') {\n      const frame = JSON.parse(req.rawBody);\n      launchEditor(frame.file, frame.lineNumber, watchFolders);\n      res.end('OK');\n    } else {\n      next();\n    }\n  };\n}\n"]}